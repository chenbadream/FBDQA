# FBDQA第六次课程

## Python数学函数

### 函数逼近

#### 回归

- 回归的任务是在给定一组基函数$b_d, d\in \{1, \dots, D\}$的情况下，根
据公式：min$\frac 1I\sum_{i=1}^I(y_i-\sum_{d=1}^D \alpha_d\cdot b_d(x_i))^2$找出最优参数$\alpha_1^*, \dots, \alpha_D^*$，其中$y_i=f(x_i)$。$x_i$可以视为自变量观测值，$y_i$ 可视为因变量观测值（从函数或者统计的意义上说）
- 我们的函数就是$\sum_{d=1}^D\alpha_d\cdot b_d(x)$。
- 除了单项式作为基函数，还可以选择其他的`numpy.linalg.lstsq`

### 凸优化

#### 全局最小化

- 对应`scipy.optimize.brute`，需指定初始参数化条件

#### 局部最小化

- 对应`scipy.optimize.fmin`，需给定其实参数值，可以定义输入参数宽容度、函数值宽容度、最大迭代和函数调用次数

在许多凸优化问题中，建议在局部优化之前进行全局优化。主要
原因是局部凸优化算法很容易陷人某个局部最小值(所谓的“盆地
跳跃” ( basin hopping ) )，而忽略"更好"的局部最小值和全局最小
值

#### 有约束优化


## 配对交易

相关性 平稳性 协整性 对冲比例 多空价差 策略持有时间 收益率

### 相关性
- 两个价格序列之间的相关性（ Correlation ）实际上是指它们在一段时间内（具体来说，假设是一天）收益率的相关性。

### 平稳性
- 如果时间序列从未偏离其初始值，那么它就是“平稳的”（ stationarity ）。
- 很明显，如果一种股票的价格序列是平稳的，那么它将是均值回归策略的一个很好的选择。
- 但可惜的是，大多数股票价格序列都不是平稳的——它们表现出几何上的随机游走（几何布朗运动GBM），使得它们离起始点的价格越来越远。

### 协整性
- 如果两组序列是非平稳的（non-stationary），但它们的线性组合可以得到一个平稳序列，那么我们就说这两组时间序列数据具有协整的性质（cointegration）。

### 配对交易
- 两组时间序列数据的差是平稳的，则我们可以根据这个差的平稳性进行投资获利
- 找到一对股票（pair），如果做多其中一只股票而做空另一只股票，整个投资组合的市场价值是稳定的。
• 在这种情况下，这两个单独的时间序列的差就是协整的。通常，形成协整对（CointergrationPair）的两只股票来自同一个行业。
• 交易员们很早就熟悉这种配对交易策略：在这些对形成的股票价格差
价较低时买入对组合，在差价较高时卖出/做空对组合——换句话说，
这是一种经典的均值回归策略

### 如何做配对交易
- 步骤一：进行股票对的测试，找到可以配对的组合---协整性测试（恩格尔-格兰杰测试）
- 步骤二：持有比例---对冲比例
  - Spread（价格差）：做多一只股票和按比例做空另一只股票的差价
- 步骤三：持有的时间---计算半衰期，确定策略持有时间
    - Ornstein-Uhlenbeck公式
      - $dz(t)=-\theta(z(t)-\mu)dt+dW$
      - $z(t)$是投资组合的价格时间序列，也就是价格差(Spread)序列
      - $\mu$是z(t)的历史均值，$dW$是一个随机的高斯噪声
      - 半衰期$\ln 2/\theta$,半衰期可用于确定均值回复位置的最佳保持时间
- 步骤四：策略退出